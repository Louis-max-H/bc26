<!DOCTYPE html>
<html lang="en" suppresshydrationwarning="true" data-lt-installed="true" class=" hwxiluhsxg idc0_350"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta content="width=device-width,initial-scale=1" name="viewport"><title>Louis-Max HARTER</title><link href="http://127.0.0.1:1111/informatique/idees/images/pp-small.png" rel="icon" type="image/x-icon"><style>body{flex-wrap:wrap;align-items:flex-start;gap:2em;margin:1lh;font-family:monospace;font-size:16px;display:flex}a{color:#4897cd;text-decoration:none}a.en-cours{color:#4c606d}blockquote{border-left:3px solid #0466c8;height:100%;padding-left:2lh}h2,h3{color:#4897cd;margin-top:1lh}h4{color:#4c606d}c{color:#1e5b88}e{color:#7c7e7f}header{text-align:right;color:#4897cd;flex-direction:column;flex:0 250px;align-items:flex-end;min-width:0;font-size:xx-large;display:flex}section{flex:400px;min-width:0;max-width:1200px}body:before{content:"";pointer-events:none;z-index:-1;background-image:radial-gradient(circle at 1% 87%,gray .4px,#0000 .4px),radial-gradient(circle at 3% 47%,gray .4px,#0000 .4px),radial-gradient(circle at 7% 13%,gray .4px,#0000 .4px),radial-gradient(circle at 9% 69%,gray .4px,#0000 .4px),radial-gradient(circle at 11% 97%,gray .4px,#0000 .4px),radial-gradient(circle at 13% 57%,gray .4px,#0000 .4px),radial-gradient(circle at 17% 33%,gray .4px,#0000 .4px),radial-gradient(circle at 19% 91%,gray .4px,#0000 .4px),radial-gradient(circle at 23% 78%,gray .4px,#0000 .4px),radial-gradient(circle at 29% 39%,gray .4px,#0000 .4px),radial-gradient(circle at 31% 61%,gray .4px,#0000 .4px),radial-gradient(circle at 37% 9%,gray .4px,#0000 .4px),radial-gradient(circle at 41% 29%,gray .4px,#0000 .4px),radial-gradient(circle at 43% 83%,gray .4px,#0000 .4px),radial-gradient(circle at 47% 93%,gray .4px,#0000 .4px),radial-gradient(circle at 53% 77%,gray .4px,#0000 .4px),radial-gradient(circle at 59% 11%,gray .4px,#0000 .4px),radial-gradient(circle at 63% 51%,gray .4px,#0000 .4px),radial-gradient(circle at 67% 89%,gray .4px,#0000 .4px),radial-gradient(circle at 71% 3%,gray .4px,#0000 .4px),radial-gradient(circle at 73% 71%,gray .4px,#0000 .4px),radial-gradient(circle at 77% 31%,gray .4px,#0000 .4px),radial-gradient(circle at 79% 17%,gray .4px,#0000 .4px),radial-gradient(circle at 81% 23%,gray .4px,#0000 .4px),radial-gradient(circle at 83% 37%,gray .4px,#0000 .4px),radial-gradient(circle at 87% 67%,gray .4px,#0000 .4px),radial-gradient(circle at 89% 43%,gray .4px,#0000 .4px),radial-gradient(circle at 91% 8%,gray .4px,#0000 .4px),radial-gradient(circle at 93% 99%,gray .4px,#0000 .4px),radial-gradient(circle at 97% 81%,gray .4px,#0000 .4px);background-position:.3cm .7cm,2.1cm 1.3cm,.8cm 2.4cm,1.7cm .9cm,2.6cm 1.8cm,.5cm .2cm,1.9cm 2.7cm,2.3cm 1.1cm,.1cm 1.6cm,2.8cm 2.1cm,1.4cm .6cm,.7cm 2.8cm,2.5cm .8cm,1.2cm 1.9cm,2.7cm 1.3cm,.2cm 2.5cm,2cm .3cm,1.6cm 1.7cm,2.9cm 2.6cm,1.8cm 2cm,.9cm 1.1cm,2.2cm .5cm,1.1cm 2.3cm,2.4cm 1.5cm,.6cm 1.8cm,2.1cm .9cm,1.5cm 2.2cm,.4cm 1.4cm,2.6cm 1cm,1.3cm 2.4cm;background-repeat:repeat;background-size:2.1cm 2.1cm,3.7cm 3.7cm,1.8cm 1.8cm,4.3cm 4.3cm,2.9cm 2.9cm,1.4cm 1.4cm,3.6cm 3.6cm,2.2cm 2.2cm,4.7cm 4.7cm,1.7cm 1.7cm,3.1cm 3.1cm,2.8cm 2.8cm,1.9cm 1.9cm,4.1cm 4.1cm,2.5cm 2.5cm,3.8cm 3.8cm,1.6cm 1.6cm,2.7cm 2.7cm,4.4cm 4.4cm,3.2cm 3.2cm,2.3cm 2.3cm,1.5cm 1.5cm,4.6cm 4.6cm,2.4cm 2.4cm,3.9cm 3.9cm,1.8cm 1.8cm,2.6cm 2.6cm,3.4cm 3.4cm,1.7cm 1.7cm,4.2cm 4.2cm;width:100%;height:100%;position:fixed;top:0;left:0}pre{border:1pt solid #ccc;border-radius:.5em;padding:1rem;font-size:.75rem;overflow:auto}code{background-color:#fff;border:1pt solid #ccc;border-radius:.35em;padding:.1em .35em;font-family:ui-monospace,monospace}pre code{background-color:inherit;border:0;border-radius:0;padding:0;font-family:inherit;overflow:visible}</style></head><body><header><a <f="" href="http://127.0.0.1:1111/" style="color:#3f5a6b;margin-bottom:3lh;font-size:clamp(2px,1.5vw,4.5px);display:block;overflow:hidden">▄▄▄<c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓</c><f>▓▄▄&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</f><f><br>▄▄</f><c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓</c><f>▄▄&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</f><f><br>▄▄</f><c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓</c><f>▄▄&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</f><f><br>▄▓</f><c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓</c><f>▄&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</f><f><br>▄</f><c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓</c><f>▄&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</f><br>▓<c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓</c><f>▄&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</f><f><br>▓</f><c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓</c><f>▄&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</f><f><br>▄</f><c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓</c><f>▄&nbsp;&nbsp;&nbsp;&nbsp;</f><c><br>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓</c><f>▄&nbsp;&nbsp;&nbsp;</f><f><br>░</f><c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓</c><f>▒&nbsp;&nbsp;</f><f><br>▒</f><c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓</c><f>▒&nbsp;</f><f><br>▐</f><c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓</c><f>▒&nbsp;</f><c><br>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓&nbsp;</c><f><br>▒</f><c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓</c><f><br>▐</f><c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓</c>▒▒<e>▒▒▒</e>▒<c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓</c><f>▒</f><f><br>▒</f><c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓</c>▒<e>▒▒</e>▒▒▒▒▒<e>▒▒▒▒▒</e>▒<c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓</c><f>▒</f><c><br>▒▓▓▓▓▓▓▓▓▓▓▓▓▓</c>▀▀▀<c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▀</c>▒▒▒▒▒▒▒▒▒▒▒▒▒<e>▒░░</e>▓<c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓</c><c><br>▓▓▓▓▓▓▓▓▓</c>▒▒<e>▒▒▒▒▒▒░▒</e>▀▀▒<e>▒▒▒▒▒▒</e>▀<c>▓▓▓</c><e>▒</e>▒▒▒▒▒▒▒▒▒▒▒<e>▒▒▒▒░░▒</e>▒<c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓</c><c><br>▓▓▓▓▓▓</c>▀<e>▒▒░▒</e>▒▒▒<e>▒▒</e>▒<e>▒▒▒▒▒▒</e>▒▒▒▒<e>▒▒▒▒▒</e>▒▒▒▒▒▒▒▒▒<e>▒▒▒▒▒▒▒▒▒░▒▒</e><c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓</c><e><br>░░░▒░▒░▒▒▒▒▒</e>▒▒<e>▒</e>▒▒▒▒▒▒<e>▒▒▒</e>▒▒▒▒▒▒<e>▒▒▒▒</e>▒▒▒▒▒▒▒▒▒▒▒▒▒▒<e>▒░▒▒▒▒</e><c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒</c><e><br>░▒▒▒▒▒▒▒</e>▒▒▒<e>▒▒▒▒▒</e>▒▒▒▒▒▒▒<e>▒</e>▒▒▒▒▒<e>▒▒▒▒▒░▒▒</e>▀▓▒▒▒▒▒▒▒▒▒▒<e>▒▒▒▒</e>▒<c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓</c><f>▒</f><e><br>▐▒▒▒▒▒░░░▒░▒▒▒▒▒▒▒▒▒▒▒▒░▒▒▒▒▒▒▒░░░▒▒▒░░</e>▒▒▒▒▒▒▒▒▒▒▒▒<e>▒▒░▒</e>▀<c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓</c><f>▒</f><e><br>▒▒▒▒▒░▒▒▒▒▒░▒▒▒▒▒▒▒▒▒▒▒▒░▒</e>▒▒▒▒<e>▒▒░░▒▒▒▒</e>▒▒▒▒▒▒▒▒▒▒▒▒<e>▒▒▒▒▒</e><c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▌</c><e><br>▒▒▒▒▒▒▒▒▒▒▒░▒▒▒▒</e>▒▒▒▒<e>▒▒▒▒▒</e>▒▒▒▒▒▒<e>▒▒░▒░▒▒</e>▒▒▒▒▒▒▒▒▒<e>▒▒▒░▒▒░▒</e>▒<c>▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓&nbsp;</c><e><br>▐</e>▒▒▒▒▒▒<e>▒</e>▒▒<e>▒▒▒▒</e>▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒<e>▒▒▒▒▒▒</e>▒▒▒▒▒▒▒▒▒▒▒<e>▒▒▒▒░░░░▒</e>▀▒▀<c>▒▓▓▓▓▓▓▓▓▓▓▓▓▓</c><f>▒&nbsp;</f><e><br>▒</e>▒▒▒<e>▒▒</e>▒▒▓▒▒▒▒▒▒▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒<e>▒▒▒▒▒░░</e>▒▒▒▒▒▒▒▒▒▒<e>▒▒▒░░░▒▒░░░░░░▒</e>▒<c>▓▓▓▓▓▓▓▓▓</c><f>▀&nbsp;&nbsp;</f><e><br>▒</e>▒▒▒▒▒▒▒▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒<e>▒▒▒▒▒▒░░▒▒</e>▒▒▒▒▒<e>▒▒▒▒░▒░░░░░░░░▒▒▒▒▒</e><c>▓▓▓▓▓▓▓▓</c><f>▀&nbsp;&nbsp;&nbsp;</f><e><br>▒</e>▒▒▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒<e>▒▒▒▒░░░▒░░▒▒▒░░░░░▒░▒▒▒▒░░░▒▒</e>▒▒<c>▓▓▓▓▓▓▓▓</c><f>▀&nbsp;&nbsp;&nbsp;</f><e><br>▀</e>▓▒▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒<e>▒▒▒░░▒▒░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░▒</e>▒▒<c>▓▓▓▓▓▓</c><f>▀&nbsp;&nbsp;&nbsp;&nbsp;</f><br>▀▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒<e>▒▒▒░░▒░░▒▒▒▒▒▒▒▒</e>▒▒▒<e>▒▒▒▒▒▒▒▒░░░░░</e>▒▒▒<c>▓▀&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</c><br>▀▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒<e>▒▒▒▒▒▒▒▒▒▒▒▒</e>▒▒▒▒▒▒▒▒▒<e>▒▒▒▒▒░▒▒░░░▒▒▒&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</e><e><br>▀</e>▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒<e>▒▒▒▒▒</e>▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒<e>▒▒▒▒▒▒▒░▒▒&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</e><e><br>▀</e>▀▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒<e>▒▒▒▒▒▒▒&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</e><br>▀▓▓▓▓▓▒▒▒▒▒▒▒▒▒<e>▒▒▒▒▒</e>▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒<e>▒▒▒▒▒▒&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</e><e><br>▀▀</e>▀▓▒▒▒▒▒▒▒▒▒<e>▒▒▒▒</e>▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒<e>▒▒&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</e><e><br>▀▀▀</e>▀▒▒▒<e>▒▒▒</e>▒▒▒▒▒▒▒▒▒▒▀<e>▀▀▀&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</e> </a><a href="http://127.0.0.1:1111/" style="color:#4c606d">Home</a><br><a href="http://127.0.0.1:1111/about/">About</a><a href="http://127.0.0.1:1111/feed/">Feed</a><a href="http://127.0.0.1:1111/posts/">Posts</a><a href="http://127.0.0.1:1111/tags">Tags</a><div><a href="http://127.0.0.1:1111/informatique/idees/">FR</a> / <a href="http://127.0.0.1:1111/informatique/idees/">EN</a></div></header><section><h1 class="title" style="margin-bottom:0">Battlecode 26 pathfinding <a href="http://127.0.0.1:1111/informatique/"> ⬏ </a></h1><strong>Créé le 2025-10-17</strong><div style="margin-top:2lh"></div><h1 id="introduction">Introduction</h1><h2 id="movement-displacement">Movement, displacement</h2><p>This year we have two components to consider: movement and orientation. We will therefore have a score for:</p><ul><li>If I turn in this direction, can I see a cell that I haven't seen in a long time</li><li>If I move to this cell, am I within range of such action or other</li></ul><p>Both must be taken into account:</p><ul><li>Impossible to attack another unit if I cannot see it</li><li>It's useless to back away to make sure I can see it if I'm then out of range to attack it</li></ul><h2 id="automaton">Automaton</h2><p>The
 best battlecode teams are also those that succeed in "grouping" 
actions. For example, let's say I need to flee from a cat, a classic 
algorithm would be to move in the opposite direction, but it might be 
more judicious to move towards allies to attack it as a group.</p><p>But this movement action towards allies can also be used to avoid them and thus explore where no one is located.</p><p>Thus,
 several heuristics can accumulate and be used in different states. To 
do this, we will implement them in the PathFinding class which can be 
used by everyone.</p><h1 id="vision-orientation">Vision orientation</h1><h2 id="example">Example</h2><p>We will use a <code>VisionUtils.java</code> class to manage vision and <code>PathFinding.java</code> for movement. To do this, here are some useful functions:</p><pre class="language-java" data-lang="java" style="color:#657b83;background-color:#fdf6e3"><code class="language-java" data-lang="java"><span style="color:#93a1a1">// Add a score to a location. When looking to this location, the unit will have a bonus of score.
</span><span style="color:#859900">VisionUtils</span><span>.</span><span style="color:#b58900">setScore</span><span>(</span><span style="color:#859900">MapLocation</span><span> loc, </span><span style="color:#268bd2">char</span><span> score)
</span><span>
</span><span style="color:#93a1a1">// Return the sum of all score the unit can view from loc, with orientation dir for unit of type rc.getType()
</span><span style="color:#859900">VisionUtils</span><span>.</span><span style="color:#b58900">getScoreInView</span><span>(</span><span style="color:#859900">MapLocation</span><span> loc, </span><span style="color:#859900">Direction</span><span> dir, rc.</span><span style="color:#b58900">getType</span><span>())
</span></code></pre><h2 id="technical-aspect">Technical aspect</h2><p>Practical, right? But be careful about certain aspects:</p><ul><li>The score is a char (2<strong>16 = 65536) but must not exceed 700. (Indeed, the king can see 9*9 cells, and we get a maximum of 2</strong>16/(9*9) = 801 to avoid overflow)</li><li>We use chars because <code>"\u0000\u0000... x3600 ...\u0000".toCharArray()</code> allows allocating an array filled with 0 in about ten bytecodes versus <code>3600</code> if we make an integer array</li><li>Cells
 have a default score of 700 if they are not explored, (we should 
probably lower this limit, I'll explain how in the next part)</li><li>The score on a cell is set to 0 at the start of the turn if the unit can see this cell</li><li>We
 use a scoring system that encourages seeing cells that haven't been 
seen in a while, this score increases by 1 every 5 turns. (So for 2000 
turns, max score of 400)</li><li>We can say that we consider a good 
action worth 100 points and an action that must be done at all costs 
300? (We fall back on the default value of 700)</li></ul><h1 id="movement">Movement</h1><h2 id="example-1">Example</h2><h3 id="movement-in-the-best-direction">Movement in the best direction</h3><p>Movement scores are integers, so possibly negative.<br> These scores are stored in the <code>Explore.java</code> class and reset to zero at the start of the turn.<br>
 We can imagine that a state adds a score even if it doesn't move, and 
then, when a state seeks to make a movement, it will benefit from the 
score of the previous state.</p><p>Here is an excerpt from the <code>Explore.java</code> state:</p><pre class="language-java" data-lang="java" style="color:#657b83;background-color:#fdf6e3"><code class="language-java" data-lang="java"><span style="color:#93a1a1">// To explore, the score for a direction is the score of the view in this direction 
</span><span style="color:#268bd2">int</span><span style="color:#586e75">[]</span><span> scores = </span><span style="color:#859900">new </span><span style="color:#268bd2">int[]</span><span>{</span><span style="color:#6c71c4">0</span><span>, </span><span style="color:#6c71c4">0</span><span>, </span><span style="color:#6c71c4">0</span><span>, </span><span style="color:#6c71c4">0</span><span>, </span><span style="color:#6c71c4">0</span><span>, </span><span style="color:#6c71c4">0</span><span>, </span><span style="color:#6c71c4">0</span><span>, </span><span style="color:#6c71c4">0</span><span>, </span><span style="color:#6c71c4">0</span><span>};
</span><span style="color:#859900">MapLocation</span><span> myLoc = rc.</span><span style="color:#b58900">getLocation</span><span>();
</span><span style="color:#859900">for</span><span>(</span><span style="color:#859900">Direction</span><span> dir </span><span style="color:#859900">: Direction</span><span>.</span><span style="color:#b58900">values</span><span>()){
</span><span>    </span><span style="color:#859900">if</span><span>(dir != </span><span style="color:#859900">Direction</span><span>.</span><span style="color:#cb4b16">CENTER</span><span>){
</span><span>        scores[dir.</span><span style="color:#b58900">ordinal</span><span>()] = </span><span style="color:#859900">VisionUtils</span><span>.</span><span style="color:#b58900">getScoreInView</span><span>(myLoc.</span><span style="color:#b58900">add</span><span>(dir), dir, rc.</span><span style="color:#b58900">getType</span><span>());
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#93a1a1">// We add the score without normalization.
</span><span style="color:#859900">PathFinding</span><span>.</span><span style="color:#b58900">addScoresWithoutNormalization</span><span>(
</span><span>        scores,
</span><span>        </span><span style="color:#6c71c4">10 </span><span style="color:#93a1a1">// Coefficient
</span><span>);
</span><span>
</span><span style="color:#93a1a1">// Take the best direction
</span><span style="color:#859900">Direction</span><span> bestDir = </span><span style="color:#859900">PathFinding</span><span>.</span><span style="color:#b58900">bestDir</span><span>();
</span><span>rc.</span><span style="color:#b58900">turn</span><span>(bestDir);
</span><span style="color:#859900">if</span><span>(</span><span style="color:#859900">PathFinding</span><span>.</span><span style="color:#b58900">move</span><span>(bestDir).</span><span style="color:#b58900">notOk</span><span>()){
</span><span>    </span><span style="color:#b58900">print</span><span>(</span><span style="color:#839496">"</span><span style="color:#2aa198">Can't move to best direction.</span><span style="color:#839496">"</span><span>);
</span><span>}
</span></code></pre><h3 id="movement-towards-a-target">Movement towards a target</h3><p>What if I want to move to a specific location?</p><pre class="language-java" data-lang="java" style="color:#657b83;background-color:#fdf6e3"><code class="language-java" data-lang="java"><span style="color:#93a1a1">// TODOS: Use Bugnav to get best direction to loc
</span><span style="color:#586e75">public static </span><span style="color:#859900">Direction </span><span style="color:#b58900">directionTo</span><span>(</span><span style="color:#859900">MapLocation</span><span> loc){
</span><span>    </span><span style="color:#859900">return Robot</span><span>.rc.</span><span style="color:#b58900">getLocation</span><span>().</span><span style="color:#b58900">directionTo</span><span>(loc);
</span><span>}
</span><span>
</span><span style="color:#586e75">public static </span><span style="color:#859900">Result </span><span style="color:#b58900">moveTo</span><span>(</span><span style="color:#859900">MapLocation</span><span> loc) throws </span><span style="color:#859900">GameActionException </span><span>{
</span><span>    </span><span style="color:#859900">return </span><span style="color:#b58900">move</span><span>(</span><span style="color:#b58900">directionTo</span><span>(loc));
</span><span>}
</span><span>
</span><span style="color:#586e75">public static </span><span style="color:#859900">Result </span><span style="color:#b58900">move</span><span>(</span><span style="color:#859900">Direction</span><span> dir) throws </span><span style="color:#859900">GameActionException </span><span>{
</span><span>    </span><span style="color:#859900">RobotController</span><span> rc = </span><span style="color:#859900">Robot</span><span>.rc;
</span><span>    </span><span style="color:#859900">if</span><span>(rc.</span><span style="color:#b58900">canMove</span><span>(dir)){
</span><span>        </span><span style="color:#859900">Robot</span><span>.lastLocation = rc.</span><span style="color:#b58900">getLocation</span><span>();
</span><span>        </span><span style="color:#859900">Robot</span><span>.lastDirection = dir;
</span><span>
</span><span>        rc.</span><span style="color:#b58900">move</span><span>(dir);
</span><span>        </span><span style="color:#859900">return new Result</span><span>(</span><span style="color:#cb4b16">OK</span><span>, </span><span style="color:#839496">"</span><span style="color:#2aa198">Moved to </span><span style="color:#839496">" </span><span>+ dir.</span><span style="color:#b58900">toString</span><span>());
</span><span>    } </span><span style="color:#859900">else </span><span>{
</span><span>        </span><span style="color:#859900">return new Result</span><span>(</span><span style="color:#cb4b16">CANT</span><span>, </span><span style="color:#839496">"</span><span style="color:#2aa198">Can't move to </span><span style="color:#839496">" </span><span>+ dir.</span><span style="color:#b58900">toString</span><span>());
</span><span>    }
</span><span>}
</span><span>
</span><span style="color:#93a1a1">// Move to best direction
</span><span style="color:#586e75">public static </span><span style="color:#859900">Result </span><span style="color:#b58900">moveBestDir</span><span>() throws </span><span style="color:#859900">GameActionException </span><span>{
</span><span>    </span><span style="color:#859900">return </span><span style="color:#b58900">move</span><span>(</span><span style="color:#b58900">bestDir</span><span>());
</span><span>}
</span></code></pre><h3 id="smart-movement">Smart movement</h3><p>Well... I need to make an algorithm (bugnav) to be able to determine the best direction towards a destination...<br> But there's a problem, right?<br> Why make lots of scores if we don't end up using them?\</p><p>If you ever want to move in a direction in a smart way, you can do:</p><pre class="language-java" data-lang="java" style="color:#657b83;background-color:#fdf6e3"><code class="language-java" data-lang="java"><span style="color:#859900">PathFinding</span><span>.</span><span style="color:#b58900">modificatorOrientation</span><span>(
</span><span>    </span><span style="color:#859900">PathFinding</span><span>.</span><span style="color:#b58900">directionTo</span><span>(target)
</span><span>);
</span><span style="color:#859900">Pathfinding</span><span>.</span><span style="color:#b58900">moveBestDir</span><span>();
</span></code></pre><p>The modificatorOrientation function takes care of
 drastically dividing the scores of cells that are not in the desired 
direction, but this still allows them to be taken into account!</p><pre class="language-java" data-lang="java" style="color:#657b83;background-color:#fdf6e3"><code class="language-java" data-lang="java"><span style="color:#586e75">public static</span><span> void </span><span style="color:#b58900">modificatorOrientation</span><span>(</span><span style="color:#859900">Direction</span><span> dir){
</span><span>    </span><span style="color:#93a1a1">// Boost score toward direction. Set to 0 if not toward.
</span><span>    scores[dir.</span><span style="color:#b58900">rotateLeft</span><span>().</span><span style="color:#b58900">ordinal</span><span>()] /= </span><span style="color:#6c71c4">2</span><span>;
</span><span>    scores[dir.</span><span style="color:#b58900">ordinal</span><span>()] *= </span><span style="color:#6c71c4">1</span><span>;
</span><span>    scores[dir.</span><span style="color:#b58900">rotateRight</span><span>().</span><span style="color:#b58900">ordinal</span><span>()] /= </span><span style="color:#6c71c4">2</span><span>;
</span><span>
</span><span>    </span><span style="color:#859900">Direction</span><span> opposite = dir.</span><span style="color:#b58900">opposite</span><span>();
</span><span>    scores[opposite.</span><span style="color:#b58900">rotateLeft</span><span>().</span><span style="color:#b58900">rotateLeft</span><span>().</span><span style="color:#b58900">ordinal</span><span>()] /= </span><span style="color:#6c71c4">100</span><span>;
</span><span>    scores[opposite.</span><span style="color:#b58900">rotateLeft</span><span>().</span><span style="color:#b58900">ordinal</span><span>()] /= </span><span style="color:#6c71c4">50</span><span>;
</span><span>    scores[opposite.</span><span style="color:#b58900">ordinal</span><span>()] /= </span><span style="color:#6c71c4">150</span><span>;
</span><span>    scores[opposite.</span><span style="color:#b58900">rotateRight</span><span>().</span><span style="color:#b58900">ordinal</span><span>()] /= </span><span style="color:#6c71c4">50</span><span>;
</span><span>    scores[opposite.</span><span style="color:#b58900">rotateRight</span><span>().</span><span style="color:#b58900">rotateRight</span><span>().</span><span style="color:#b58900">ordinal</span><span>()] /= </span><span style="color:#6c71c4">100</span><span>;
</span><span>    scores[</span><span style="color:#859900">Direction</span><span>.</span><span style="color:#cb4b16">CENTER</span><span>.</span><span style="color:#b58900">ordinal</span><span>()] = </span><span style="color:#6c71c4">0</span><span>;
</span><span>}
</span></code></pre><h2 id="technical-aspect-1">Technical aspect</h2><p>For <code>addScoresWithoutNormalization()</code> or <code>addScoresWithoutNormalization()</code> ???<br>
 To be able to compare things on the same basis! Imagine a -100 penalty 
on a cell because we would be within range of the opponent. We then seek
 to compare this value to a heuristic that for each cell, tells us the 
distance to another cell.<br> In our case, the heuristic gives us a 
score of 150 on all cells, we would have a positive score in the end, so
 we move anyway. Whereas a score of 15 on all cells for this heuristic 
would give us a negative final score, we don't move.</p><p>Scores can therefore be normalized on <code>100_000</code>, the maximum score being 100_000 using normalization.<br> If you don't want to normalize your scores (for example penalty based on damage amount), make sure that a score of <code>1</code> is actually a score of <code>100_000</code></p><p>You can use a coefficient so that heuristics, even normalized, have a more important score than others.</p><p>We have an overflow if we use more than <code>100</code> scores, each with a value of <code>100_000</code> (normalized), and a coefficient of <code>200</code>. So normally, we're safe.</p><h1 id="why-will-this-strategy-help-us-climb-the-rankings">Why will this strategy help us climb the rankings?</h1><p>Come on, it's time to pat ourselves on the back (French expression, I don't know if it will be idiomatic in English)</p><ul><li>Because we managed to decouple vision / movement heuristics</li><li>Because we use Jinja to have a super fast <code>VisionUtils</code></li><li>Because we're going to make multi-heuristic movements</li><li>Because all coefficient parameters can be optimized by running thousands of matches on test servers, I'll probably do that soon</li></ul></section><div style="color:#aaa;z-index:1000;position:fixed;top:6px;left:12px">#filesize#</div><script src="PathFinding_files/livereload.js"></script><protonpass-root-257b data-protonpass-role="root" data-protonpass-theme="os"></protonpass-root-257b></body></html>